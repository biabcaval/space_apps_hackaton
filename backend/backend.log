INFO:     Will watch for changes in these directories: ['/Users/biabc/Documents/space_apps_hackaton/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [10910] using StatReload
INFO:     Started server process [10933]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Loaded 1 OpenWeatherMap API key(s) for fallback support
âœ… Connected to MongoDB at mongodb://mongo:qWFNXBgMtmzAqlSkbtHnmrNHLSUreLwA@centerbeam.proxy.rlwy.net:45179
ğŸš€ Application started
ğŸ” Searching for TEMPO NO2 data near (40.7127, -74.0060)
   Searching up to 30 days backwards from 2025-10-06...
   Checking 2025-10-06...
âœ… NASA Earthaccess authenticated successfully
   Checking 2025-10-05...
   Checking 2025-10-04...
   Checking 2025-10-03...
   Checking 2025-10-02...
   Checking 2025-10-01...
   Checking 2025-09-30...
   Checking 2025-09-29...
   Checking 2025-09-28...
   Checking 2025-09-27...
   Checking 2025-09-26...
   Checking 2025-09-25...
   Checking 2025-09-24...
   Checking 2025-09-23...
   Checking 2025-09-22...
   Checking 2025-09-21...
   Checking 2025-09-20...
   Checking 2025-09-19...
   Checking 2025-09-18...
   Checking 2025-09-17...
   Checking 2025-09-16...
âœ… Found 11 TEMPO data file(s) for 2025-09-16
ğŸ“Š Processing TEMPO data for: 2025-09-16
ğŸ“¦ Total results: 11
ğŸ” Array shapes - lat: (2950,), lon: (7750,), gas: (1, 2950, 7750), mask: (1, 2950, 7750)
âŒ Error in find_gas_at_location: boolean index did not match indexed array along axis 0; size of axis is 2950 but size of corresponding boolean axis is 22862500
INFO:     127.0.0.1:59397 - "GET /air-pollution/tempo?gas=NO2&lat=40.7127&lon=-74.0060&start_date=2025-09-06&end_date=2025-10-06 HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'app/services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [10933]
INFO:     Started server process [11740]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/services.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [11740]
INFO:     Started server process [11786]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Loaded 1 OpenWeatherMap API key(s) for fallback support
âœ… Connected to MongoDB at mongodb://mongo:qWFNXBgMtmzAqlSkbtHnmrNHLSUreLwA@centerbeam.proxy.rlwy.net:45179
ğŸš€ Application started
ğŸ” Searching for TEMPO NO2 data near (40.7127, -74.0060)
   Searching up to 30 days backwards from 2025-10-06...
   Checking 2025-10-06...
âœ… NASA Earthaccess authenticated successfully
   Checking 2025-10-05...
   Checking 2025-10-04...
   Checking 2025-10-03...
   Checking 2025-10-02...
   Checking 2025-10-01...
   Checking 2025-09-30...
   Checking 2025-09-29...
   Checking 2025-09-28...
   Checking 2025-09-27...
   Checking 2025-09-26...
   Checking 2025-09-25...
   Checking 2025-09-24...
   Checking 2025-09-23...
   Checking 2025-09-22...
   Checking 2025-09-21...
   Checking 2025-09-20...
   Checking 2025-09-19...
   Checking 2025-09-18...
   Checking 2025-09-17...
   Checking 2025-09-16...
âœ… Found 11 TEMPO data file(s) for 2025-09-16
ğŸ“Š Processing TEMPO data for: 2025-09-16
ğŸ“¦ Total results: 11
ğŸ” Array shapes - lat: (2950,), lon: (7750,), gas: (1, 2950, 7750), mask: (1, 2950, 7750)
ğŸ”„ Reduced gas data to 2D: (2950, 7750)
ğŸ”„ Reduced mask to 2D: (2950, 7750)
ğŸ”„ Created 2D meshgrid: lat (2950, 7750), lon (2950, 7750)
ğŸ” Flattened shapes - lat: (22862500,), lon: (22862500,), gas: (22862500,), mask: (22862500,)
ğŸ”„ Trimmed to common length: 22862500
ğŸ“Š Found 1527801 valid measurements
ğŸ“ Found closest point at distance: 2.024978 degrees
ğŸ“Š Gas value: 893667669428336.8
INFO:     127.0.0.1:59453 - "GET /air-pollution/tempo?gas=NO2&lat=40.7127&lon=-74.0060&start_date=2025-09-06&end_date=2025-10-06 HTTP/1.1" 200 OK
ğŸ” Searching for TEMPO NO2 data near (40.7127, -74.0060)
   Searching up to 30 days backwards from 2025-10-06...
   Checking 2025-10-06...
   Checking 2025-10-05...
   Checking 2025-10-04...
   Checking 2025-10-03...
   Checking 2025-10-02...
   Checking 2025-10-01...
   Checking 2025-09-30...
   Checking 2025-09-29...
   Checking 2025-09-28...
   Checking 2025-09-27...
   Checking 2025-09-26...
   Checking 2025-09-25...
   Checking 2025-09-24...
   Checking 2025-09-23...
   Checking 2025-09-22...
   Checking 2025-09-21...
   Checking 2025-09-20...
   Checking 2025-09-19...
   Checking 2025-09-18...
   Checking 2025-09-17...
   Checking 2025-09-16...
âœ… Found 11 TEMPO data file(s) for 2025-09-16
ğŸ“Š Processing TEMPO data for: 2025-09-16
ğŸ“¦ Total results: 11
ğŸ” Array shapes - lat: (2950,), lon: (7750,), gas: (1, 2950, 7750), mask: (1, 2950, 7750)
ğŸ”„ Reduced gas data to 2D: (2950, 7750)
ğŸ”„ Reduced mask to 2D: (2950, 7750)
ğŸ”„ Created 2D meshgrid: lat (2950, 7750), lon (2950, 7750)
ğŸ” Flattened shapes - lat: (22862500,), lon: (22862500,), gas: (22862500,), mask: (22862500,)
ğŸ”„ Trimmed to common length: 22862500
ğŸ“Š Found 1527801 valid measurements
ğŸ“ Found closest point at distance: 2.024978 degrees
ğŸ“Š Gas value: 893667669428336.8
INFO:     127.0.0.1:59496 - "GET /air-pollution/tempo?gas=NO2&lat=40.7127&lon=-74.0060&start_date=2025-09-06&end_date=2025-10-06 HTTP/1.1" 200 OK
/Users/biabc/miniconda3/lib/python3.13/multiprocessing/resource_tracker.py:301: UserWarning: resource_tracker: There appear to be 2 leaked semaphore objects to clean up at shutdown: {'/mp-cox8tt2a', '/mp-fteersbd'}
  warnings.warn(
